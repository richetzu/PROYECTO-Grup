const fs = require('fs');
const path = require('path');

// Crear directorio assets si no existe
const assetsDir = path.join(__dirname, '..', 'assets');
if (!fs.existsSync(assetsDir)) {
  fs.mkdirSync(assetsDir, { recursive: true });
}

// PNG mínimo válido de 50x50 píxeles, color naranja/rojo (caramelo)
// Este es un PNG generado manualmente con datos válidos
const candyPng = Buffer.from([
  0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, // PNG signature
  0x00, 0x00, 0x00, 0x0d, // IHDR chunk length
  0x49, 0x48, 0x44, 0x52, // IHDR
  0x00, 0x00, 0x00, 0x32, // width: 50
  0x00, 0x00, 0x00, 0x32, // height: 50
  0x08, 0x02, 0x00, 0x00, 0x00, // bit depth, color type, compression, filter, interlace
  0x8c, 0xb6, 0xe0, 0x4b, // CRC
  0x00, 0x00, 0x01, 0xd0, // IDAT chunk length
  0x49, 0x44, 0x41, 0x54, // IDAT
  0x78, 0x9c, 0xed, 0xd1, 0x41, 0x0d, 0x00, 0x20, 0x0c, 0x03, 0xb1, 0xef,
  0xfe, 0x65, 0x60, 0x37, 0xf0, 0x14, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,
  0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,
  0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,
  0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0xff,
  0x61, 0x70, 0x80, 0xf1, 0xff, 0x0e, 0xb6, 0x9c, 0x44, 0xd1, 0x74, 0x1d,
  0x07, 0xc6, 0xb1, 0x2c, 0x8b, 0x62, 0xd8, 0x36, 0x8d, 0xa3, 0xa8, 0xaa,
  0x6a, 0xad, 0x36, 0x9b, 0x4d, 0x4a, 0x29, 0xfa, 0x7e, 0xaf, 0xcb, 0x32,
  0xbb, 0xdd, 0x6e, 0xf7, 0xfb, 0x05, 0x81, 0x40, 0xa0, 0xd0, 0x68, 0x34,
  0x2a, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x03, 0x00, 0xf8,
  0x1f, 0xff, 0xff, 0xc8, 0xd9, 0x39, 0xd4, // CRC continues
  0x00, 0x00, 0x00, 0x00, // IEND chunk length
  0x49, 0x45, 0x4e, 0x44, // IEND
  0xae, 0x42, 0x60, 0x82  // CRC
]);

const candyPath = path.join(assetsDir, 'candy.png');
fs.writeFileSync(candyPath, candyPng);
console.log(`✓ candy.png created at ${candyPath}`);
console.log(`Image size: ${candyPng.length} bytes`);
